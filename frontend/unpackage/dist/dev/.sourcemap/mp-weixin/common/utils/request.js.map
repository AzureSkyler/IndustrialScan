{"version":3,"file":"request.js","sources":["common/utils/request.js"],"sourcesContent":["// common/utils/request.js\n\nconst BASE_URL = 'http://127.0.0.1:8081'; // 替换为你的实际域名或IP+端口\n\n// 创建请求函数\nconst request = (url, method, data = {}, showLoading = true) => {\n  const token = uni.getStorageSync('token'); // 可选：从本地获取 token\n\n  return new Promise((resolve, reject) => {\n    if (showLoading) {\n      uni.showLoading({\n        title: '加载中',\n        mask: true\n      });\n    }\n\n    uni.request({\n      url: BASE_URL + url,\n      method: method,\n      data: data,\n      header: {\n        'content-type': 'application/json',\n        'Authorization': token ? `Bearer ${token}` : ''\n      },\n      success: (res) => {\n        if (res.statusCode === 200 || res.statusCode === 201) {\n          resolve(res.data);\n        } else if (res.statusCode === 401) {\n          // Token 失效，跳转登录页\n          uni.removeStorageSync('token');\n          uni.reLaunch({ url: '/pages/login/login' });\n        } else {\n          uni.showToast({ title: '请求失败', icon: 'none' });\n          reject(res.data);\n        }\n      },\n      fail: (err) => {\n        uni.showToast({ title: '网络异常', icon: 'none' });\n        reject(err);\n      },\n      complete: () => {\n        uni.hideLoading();\n      }\n    });\n  });\n};\n\n// GET 请求封装\nexport const get = (url, data = {}) => {\n  return request(url, 'GET', data);\n};\n\n// POST 请求封装\nexport const post = (url, data = {}) => {\n  return request(url, 'POST', data);\n};\n\n// PUT 请求封装\nexport const put = (url, data = {}) => {\n  return request(url, 'PUT', data);\n};\n\n// DELETE 请求封装\nexport const del = (url, data = {}) => {\n  return request(url, 'DELETE', data);\n};"],"names":["uni"],"mappings":";;AAEA,MAAM,WAAW;AAGjB,MAAM,UAAU,CAAC,KAAK,QAAQ,OAAO,CAAE,GAAE,cAAc,SAAS;AAC9D,QAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AAExC,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,QAAI,aAAa;AACfA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,MAAM;AAAA,MACd,CAAO;AAAA,IACF;AAEDA,kBAAAA,MAAI,QAAQ;AAAA,MACV,KAAK,WAAW;AAAA,MAChB;AAAA,MACA;AAAA,MACA,QAAQ;AAAA,QACN,gBAAgB;AAAA,QAChB,iBAAiB,QAAQ,UAAU,KAAK,KAAK;AAAA,MAC9C;AAAA,MACD,SAAS,CAAC,QAAQ;AAChB,YAAI,IAAI,eAAe,OAAO,IAAI,eAAe,KAAK;AACpD,kBAAQ,IAAI,IAAI;AAAA,QAC1B,WAAmB,IAAI,eAAe,KAAK;AAEjCA,8BAAI,kBAAkB,OAAO;AAC7BA,wBAAAA,MAAI,SAAS,EAAE,KAAK,qBAAsB,CAAA;AAAA,QACpD,OAAe;AACLA,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAM,CAAE;AAC7C,iBAAO,IAAI,IAAI;AAAA,QAChB;AAAA,MACF;AAAA,MACD,MAAM,CAAC,QAAQ;AACbA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAM,CAAE;AAC7C,eAAO,GAAG;AAAA,MACX;AAAA,MACD,UAAU,MAAM;AACdA,sBAAG,MAAC,YAAW;AAAA,MAChB;AAAA,IACP,CAAK;AAAA,EACL,CAAG;AACH;AAQY,MAAC,OAAO,CAAC,KAAK,OAAO,OAAO;AACtC,SAAO,QAAQ,KAAK,QAAQ,IAAI;AAClC;;"}